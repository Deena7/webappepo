{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Signup</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <style>
        /* Page background (keeps your current background image) */
        body{
            margin: 0;
            min-height: 100vh;
            font-family: "Segoe UI", Arial, sans-serif;
            background-image: url({% static 'assets/bgimages/adminbg.jpg' %});
            background-repeat: no-repeat;
            background-size: 100% 100%;  /* Full width and height without zooming */
            background-position: center;
            background-attachment: fixed; /* Keeps background fixed while scrolling */
            position: relative;
        }

        /* Centering wrapper to place the card in the middle */
        .page-wrap{
            min-height: 100vh;
            display: flex;
            align-items: center; /* vertical center */
            justify-content: center; /* horizontal center */
            padding: 2rem;
            box-sizing: border-box;
        }

        /* The white form card */
        .signup-card{
            background: #ffffff;
            padding: 2rem;
            border-radius: 14px;
            max-width: 520px;
            width: 100%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.18);
            border: 1px solid rgba(0,0,0,0.06);
            transition: transform 150ms ease, box-shadow 150ms ease;
            max-height: 85vh; /* Limit height to 85% of viewport */
            display: flex;
            flex-direction: column;
        }

        /* Form heading */
        .signup-card h2 {
            color: #333;
            font-size: 1.75rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            flex-shrink: 0; /* Prevent heading from shrinking */
        }

        /* Scrollable form content */
        .form-scroll {
            overflow-y: auto;
            flex-grow: 1;
            padding-right: 10px; /* Space for scrollbar */
        }

        /* Customize scrollbar */
        .form-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .form-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        .form-scroll::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        .form-scroll::-webkit-scrollbar-thumb:hover {
            background: #666;
        }

        /* subtle lift on hover/focus to feel active */
        .signup-card:hover,
        .signup-card:focus-within{
            transform: translateY(-6px);
            box-shadow: 0 18px 40px rgba(0,0,0,0.22);
        }

        /* Headings inside the card */
        .signup-card h1{
            font-weight: 700;
            margin-bottom: 0.25rem;
            font-size: 1.6rem;
        }
        .signup-card p.lead{
            margin-top: 0;
            margin-bottom: 1rem;
            color: #444;
        }

        /* Make each form-group full width and consistent spacing */
        .mb-3{
            width: 100% !important;
            margin: 0 0 1rem 0;
        }

        /* Inputs styling to match the card */
        .signup-card .form-control{
            border-radius: 8px;
            border: 1px solid rgba(0,0,0,0.12);
            padding: 0.6rem 0.75rem;
            box-shadow: none;
            transition: border-color 120ms ease, box-shadow 120ms ease;
        }
        .signup-card .form-control:focus{
            border-color: #28a745; /* bootstrap success green */
            box-shadow: 0 0 0 4px rgba(40,167,69,0.08);
            outline: none;
        }

        /* Primary button styling (slightly bigger, full width) */
        .signup-card .btn.btn-success{
            width: 100%;
            padding: 0.65rem 1rem;
            font-size: 1rem;
            border-radius: 10px;
            font-weight: 600;
        }
        .signup-card .btn.btn-success:hover{
            filter: brightness(0.97);
        }

        /* small helper text */
        .signup-card .small{ color: #666; }

        /* links and bottom text */
        .signup-card .text-center.mt-3{
            margin-top: 1rem;
        }

        /* Responsive tweaks */
        @media (max-width: 576px){
            .signup-card{ padding: 1.25rem; border-radius: 10px; }
        }

    </style>
    

</head>
<body>
    <div class="page-wrap">
    <form action="{% url 'signup' %}" method="POST" class="signup-card" onsubmit="return submission(event)">
    <h2 class="text-center mb-4">Signup Form</h2>
    <div class="form-scroll">
    {% csrf_token %}
    <!--{% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}-->
    
    <div class="mb-3">
        <label for="name" class="form-label">Full Name</label>
        <input type="text" name="name" id="input1" placeholder="Enter your full name" class="form-control w-100" value="{{ my_data.name.value|default:'' }}" required>
        <span id="msg1" class="text-danger small">{% if my_data.name.errors %}{% for error in my_data.name.errors %}{{ error }}{% endfor %}{% endif %}</span>
    </div> 

    <div class="mb-3">
        <label for="email" class="form-label">Email ID</label>
        <input type="email" name="email" id="input2" placeholder="Enter your email" class="form-control w-100" value="{{ my_data.email.value|default:'' }}" required>
        <span id="msg2" class="text-danger small">{% if my_data.email.errors %}{% for error in my_data.email.errors %}{{ error }}{% endfor %}{% endif %}</span>
    </div>

    <div class="mb-3">
        <label for="mobile" class="form-label">Mobile Number</label>
        <input type="text" name="mobile" id="input3" placeholder="Enter your mobile number" class="form-control" value="{{ my_data.mobile.value|default:'' }}" required>
        <span id="msg3" class="text-danger small">{% if my_data.mobile.errors %}{% for error in my_data.mobile.errors %}{{ error }}{% endfor %}{% endif %}</span>
    </div>

    <div class="mb-3">
        <label for="password" class="form-label">Create a Password</label>
        <input type="password" name="password" id="input4" placeholder="Create your password" class="form-control" required>
        <span id="msg4" class="text-danger small">{% if my_data.password.errors %}{% for error in my_data.password.errors %}{{ error }}{% endfor %}{% endif %}</span>
    </div>

    <div class="mb-3">
        <label for="confirm_password" class="form-label">Confirm Password</label>
        <input type="password" name="confirm_password" id="input5" placeholder="Re-enter your password" class="form-control" required>
        <span id="msg5" class="text-danger small">{% if my_data.confirm_password.errors %}{% for error in my_data.confirm_password.errors %}{{ error }}{% endfor %}{% endif %}</span>
    </div>

    <div class="mb-3">
        <input type="checkbox" id="checkbox1">
        <span>I agree to receive general emails and product offers</span><br>

        <input type="checkbox" name="terms" id="checkbox2" required>
        <span>I have reviewed and agree to EasyWay <a href="#">Privacy Policy</a></span>
        <span id="msg6" class="text-danger small"></span>
    </div>

    <div>
        <button type="submit" class="btn btn-success d-flex mx-auto">Create Account</button>
    </div>
    <div class="text-center mt-3">
        <p>Already have an account? <a href="{% url 'login_view' %}" class="text-decoration-none">Login Here</a></p>
    </div>
    </div>
    </form>
    </div>

</body>
<script>
    function submission(event) {
    let valid = true;

    // Validation references
    let name = document.getElementById('input1');
    let email = document.getElementById('input2');
    let mobile = document.getElementById('input3');
    let password = document.getElementById('input4');
    let confirm_password = document.getElementById('input5');
    let checkbox = document.getElementById('checkbox2');

    let msg1 = document.getElementById('msg1');
    let msg2 = document.getElementById('msg2');
    let msg3 = document.getElementById('msg3');
    let msg4 = document.getElementById('msg4');
    let msg5 = document.getElementById('msg5');
    let msg6 = document.getElementById('msg6');

    // Name
    if (name.value.trim().length < 3) {
        msg1.textContent = 'Enter a valid name';
        valid = false;
    } else {
        msg1.textContent = '';
    }

    // Email
    if (!email.value.includes('@gmail.com')) {
        msg2.textContent = 'Email must be a @gmail.com address';
        valid = false;
    } else {
        msg2.textContent = '';
    }

    // Mobile
    if (mobile.value.length !== 10 || !['7', '8', '9'].includes(mobile.value[0])) {
        msg3.textContent = 'Mobile number must start with 7, 8, or 9 and be 10 digits';
        valid = false;
    } else {
        msg3.textContent = '';
    }

    // Password
    const pwd = password.value;
    const pwdRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\W).{8,}$/;
    if (!pwdRegex.test(pwd)) {
        msg4.textContent = 'Password must be 8+ chars, with upper, lower, and special char';
        valid = false;
    } else {
        msg4.textContent = '';
    }

    // Confirm Password
    if (password.value !== confirm_password.value) {
        msg5.textContent = 'Passwords do not match';
        valid = false;
    } else {
        msg5.textContent = '';
    }
    

    // Checkbox
    if (!checkbox.checked) {
        msg6.textContent = 'You must accept the terms and conditions';
        valid = false;
    }
    else {
        msg6.textContent = '';
    }

    if (!valid) {
        event.preventDefault(); // Stop submission if there are errors
        alert('Please fix errors before submitting');
        return false;
    }

    return true; // Allow submission
}

</script>
</html>